# Software Requirements Specification

## Old Bicycles Marketplace

## Document Information

| **Field** | **Value** |
| --- | --- |
| **Project Name** | Old Bicycles Marketplace |
| **Document Version** | 2.0 |
| **Date** | 2026-01-21 |
| **Author** | Development Team |
| **Status** | Draft |

## Revision History

| **Version** | **Date** | **Author** | **Description** |
| --- | --- | --- | --- |
| 1.0 | 2026-01-21 | Dev Team | Initial draft |
| 2.0 | 2026-01-21 | Dev Team | Added Business Rules, Guest actor, detailed Use Cases, updated DB schema |

# 1\. Introduction

## 1.1 Purpose

Tài liệu Đặc tả Yêu cầu Phần mềm (SRS) này mô tả các yêu cầu chức năng và phi chức năng cho hệ thống **Old Bicycles Marketplace** - một nền tảng mua bán xe đạp cũ trực tuyến. Tài liệu này dành cho:

- Đội ngũ phát triển (Frontend, Backend, Mobile)
- Đội ngũ QA/Testing
- Product Owner và Stakeholders
- System Architects
- Đội ngũ vận hành và hỗ trợ

## 1.2 Scope

### 1.2.1 Product Name

**Old Bicycles Marketplace** (Sàn Xe Đạp Cũ)

### 1.2.2 Product Description

Nền tảng thương mại điện tử chuyên về mua bán xe đạp cũ, kết nối người bán (Seller), người mua (Buyer), đơn vị kiểm định (Inspector), và quản trị viên (Admin). Hệ thống hỗ trợ đăng tin, tìm kiếm, chat, đặt cọc, kiểm định xe và quản lý giao dịch.

### 1.2.3 Objectives

- Tạo nền tảng an toàn, minh bạch cho việc mua bán xe đạp cũ
- Tăng tính tin cậy thông qua hệ thống kiểm định và đánh giá
- Đơn giản hóa quy trình giao dịch với chat, đặt cọc tích hợp
- Cung cấp công cụ quản lý hiệu quả cho admin

### 1.2.4 Benefits

- **Người bán**: Tiếp cận nhiều khách hàng, quản lý tin đăng dễ dàng
- **Người mua**: Tìm kiếm xe phù hợp, an tâm với xe đã kiểm định
- **Nền tảng**: Thu phí dịch vụ, xây dựng cộng đồng xe đạp

## 1.3 Definitions, Acronyms, and Abbreviations

| **Term** | **Definition** |
| --- | --- |
| **Guest** | Người dùng chưa đăng nhập, chỉ xem thông tin cơ bản |
| **Buyer** | Người dùng mua xe đạp trên hệ thống |
| **Seller** | Người dùng đăng bán xe đạp trên hệ thống |
| **Inspector** | Đơn vị/cá nhân kiểm định tình trạng xe |
| **Admin** | Quản trị viên hệ thống |
| **Listing/Product** | Tin đăng bán xe |
| **Deposit** | Đặt cọc giữ chỗ xe |
| **Escrow** | Cơ chế giữ tiền trung gian |
| **Wishlist** | Danh sách xe yêu thích |
| **Verified Badge** | Nhãn xe đã kiểm định |
| **Groupset** | Bộ truyền động xe đạp |
| **Frame Size** | Kích thước khung xe |
| **SRS** | Software Requirements Specification |
| **FR** | Functional Requirement |
| **NFR** | Non-Functional Requirement |
| **BR** | Business Rule |
| **UC** | Use Case |

## 1.4 References

| **Reference** | **Title** | **Version** | **Date** |
| --- | --- | --- | --- |
| IEEE 830-1998 | IEEE Recommended Practice for SRS | 1998 | 1998-06 |
| Project Brief | Old Bicycles Marketplace Brief | 1.0 | 2026-01 |

## 1.5 Overview

Tài liệu được tổ chức như sau:

- **Section 1**: Giới thiệu và tổng quan
- **Section 2**: Mô tả tổng thể sản phẩm
- **Section 3**: Yêu cầu chi tiết (chức năng và phi chức năng)
- **Section 4**: Business Rules
- **Appendices**: Glossary, Models, Traceability Matrix

# 2\. Overall Description

## 2.1 Product Perspective

### 2.1.1 System Context

┌─────────────────────────────────────┐  
│ Old Bicycles Marketplace │  
│ ┌─────────┐ ┌─────────┐ ┌─────┐ │  
│ │ Web │──│ API │──│ DB │ │  
│ └─────────┘ └─────────┘ └─────┘ │  
└──────────┬────────────────────┬─────┘  
│ │  
┌──────────────────────────┼────────────────────┼──────────────────────────┐  
│ │ │ │  
┌───┴───┐ ┌────┴────┐ ┌────┴────┐ ┌────┴────┐ ┌────┴────┐  
│ Guest │ │ Buyer │ │ Seller │ │Inspector│ │ Admin │  
└───────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘  
<br/>External Services  
┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐  
│ Payment │ │ Logistics│ │ Chatbot │ │ Notif │  
└──────────┘ └──────────┘ └──────────┘ └──────────┘  

### 2.1.2 System Interfaces

| **Interface** | **System** | **Description** | **Protocol** |
| --- | --- | --- | --- |
| INT-001 | Payment Gateway | Xử lý thanh toán online đặt cọc/mua xe | REST API / HTTPS |
| INT-002 | Logistics API | Kết nối đơn vị vận chuyển | REST API |
| INT-003 | Notification Service | Gửi email, SMS, push notification | WebSocket / REST |
| INT-004 | Chatbot AI | Hỗ trợ chăm sóc khách hàng tự động | REST API |
| INT-005 | Image Storage | Lưu trữ ảnh, video xe | Cloud Storage API |

### 2.1.3 User Interfaces

- **Responsive Web Application**: Hỗ trợ Desktop, Tablet, Mobile
- **Screen resolution**: Minimum 320px (mobile) đến 1920px+ (desktop)
- **Supported browsers**: Chrome 90+, Firefox 85+, Safari 14+, Edge 90+
- **Accessibility**: WCAG 2.1 Level AA compliant
- **Language**: Vietnamese (primary), English (future)

### 2.1.4 Hardware Interfaces

Không yêu cầu hardware interface đặc biệt. Hệ thống hoạt động trên trình duyệt web chuẩn.

### 2.1.5 Software Interfaces

| **Interface** | **Software** | **Version** | **Purpose** |
| --- | --- | --- | --- |
| SW-001 | PostgreSQL | 15+ | Primary database |
| SW-002 | Redis | 7+  | Caching & session |
| SW-003 | Elasticsearch | 8+  | Search engine |
| SW-004 | AWS S3 / Cloudinary | Latest | Media storage |

### 2.1.6 Communications Interfaces

- **Protocols**: HTTPS (TLS 1.3), WebSocket (real-time chat)
- **Data formats**: JSON (API), WebP/JPEG (images), MP4 (videos)
- **Security**: JWT authentication, OAuth 2.0 social login

## 2.2 Product Functions

### High-Level Features

| **Feature ID** | **Feature Name** | **Description** | **Priority** |
| --- | --- | --- | --- |
| F-001 | User Authentication | Đăng ký, đăng nhập, quản lý tài khoản | Must |
| F-002 | Bike Listing | Đăng tin bán xe với ảnh, video, mô tả | Must |
| F-003 | Search & Filter | Tìm kiếm và lọc xe theo nhiều tiêu chí | Must |
| F-004 | Advanced Filter | Lọc theo thông số kỹ thuật (size, groupset, phanh) | Must |
| F-005 | Bike Detail View | Xem chi tiết xe, ảnh, lịch sử | Must |
| F-006 | Messaging System | Chat real-time giữa buyer và seller | Must |
| F-007 | Wishlist | Lưu xe yêu thích | Should |
| F-008 | Deposit & Order | Đặt cọc và quản lý đơn hàng | Must |
| F-009 | Seller Rating | Đánh giá uy tín người bán | Must |
| F-010 | Inspection System | Kiểm định và gắn nhãn xe | Should |
| F-011 | Admin Dashboard | Quản lý toàn bộ hệ thống | Must |
| F-012 | Report System | Báo cáo tin đăng/user vi phạm | Must |
| F-013 | Notification System | Thông báo real-time | Must |
| F-014 | Chatbot Support | Hỗ trợ khách hàng tự động | Could |
| F-015 | Logistics Integration | Kết nối vận chuyển | Could |
| F-016 | Online Payment | Thanh toán trực tuyến | Could |

## 2.3 User Characteristics

### 2.3.1 User Classes (5 Actors)

| **User Class** | **Description** | **Technical Level** | **Frequency** |
| --- | --- | --- | --- |
| **Guest** | Người dùng chưa đăng nhập, chỉ xem thông tin cơ bản | Basic | Casual |
| **Buyer** | Người tìm mua xe đạp cũ, đa dạng độ tuổi 18-55 | Basic - Intermediate | Daily/Weekly |
| **Seller** | Cá nhân hoặc cửa hàng bán xe đạp | Basic - Intermediate | Daily |
| **Inspector** | Chuyên gia kiểm định xe đạp | Intermediate | On-demand |
| **Admin** | Nhân viên quản trị hệ thống | Advanced | Daily |

### 2.3.2 User Personas

**Persona 1: Minh - The Buyer**

- **Role**: Nhân viên văn phòng, 28 tuổi
- **Goals**: Tìm xe đạp thể thao giá tốt để đi làm
- **Pain Points**: Lo ngại mua phải xe kém chất lượng, bị lừa
- **Technical Skills**: Sử dụng smartphone thành thạo

**Persona 2: Anh Tuấn - The Seller**

- **Role**: Chủ cửa hàng xe đạp nhỏ, 40 tuổi
- **Goals**: Mở rộng kênh bán hàng, quản lý tin đăng hiệu quả
- **Pain Points**: Mất thời gian trả lời tin nhắn, quản lý đơn hàng
- **Technical Skills**: Cơ bản, cần giao diện đơn giản

**Persona 3: Thảo - The Inspector**

- **Role**: Kỹ thuật viên xe đạp, 35 tuổi
- **Goals**: Cung cấp dịch vụ kiểm định, xây dựng uy tín
- **Pain Points**: Cần công cụ upload báo cáo chuyên nghiệp
- **Technical Skills**: Trung bình

## 2.4 Constraints

### 2.4.1 Regulatory Requirements

- Tuân thủ Luật Thương mại điện tử Việt Nam
- Bảo vệ dữ liệu cá nhân theo PDPD (Personal Data Protection Decree)
- Chính sách thanh toán theo quy định Ngân hàng Nhà nước

### 2.4.2 Technical Constraints

- Web-first approach (không phát triển mobile app trong phase 1)
- Response time < 3 giây cho mọi operations
- Hỗ trợ upload ảnh tối đa 10MB/file, video 100MB/file
- Tối đa 20 ảnh và 2 video mỗi tin đăng

### 2.4.3 Business Constraints

- **Timeline**: Phase 1 hoàn thành trong 4 tháng
- **Budget**: Theo ngân sách được phê duyệt
- **Team**: 3 Frontend, 2 Backend, 1 DevOps, 1 QA

## 2.5 Assumptions and Dependencies

### Assumptions

| **ID** | **Assumption** | **Impact if False** |
| --- | --- | --- |
| A-001 | Người dùng có kết nối internet ổn định | Cần offline mode |
| A-002 | Người dùng sử dụng trình duyệt hiện đại | Cần polyfills |
| A-003 | Payment gateway sẵn sàng tích hợp | Delay phase thanh toán |
| A-004 | Có đủ Inspector đăng ký sử dụng | Tính năng kiểm định không hiệu quả |

### Dependencies

| **ID** | **Dependency** | **Type** | **Impact** |
| --- | --- | --- | --- |
| D-001 | Payment Gateway API | External | Block online payment |
| D-002 | Cloud Storage Service | External | Block image upload |
| D-003 | Email/SMS Provider | External | Block notifications |
| D-004 | Logistics API | External | Block shipping feature |

# 3\. Specific Requirements

## 3.1 Use Cases by Actor

### 3.1.1 Guest (Khách vãng lai - Chưa đăng nhập)

| **UC ID** | **Use Case** | **Description** |
| --- | --- | --- |
| UC01 | Đăng ký tài khoản | Người dùng chọn role Buyer hoặc Seller |
| UC02 | Đăng nhập / Quên mật khẩu | Xác thực và khôi phục tài khoản |
| UC03 | Tìm kiếm xe (Search basic) | Tìm kiếm theo từ khóa |
| UC04 | Xem danh sách xe | Filter & Sort cơ bản |
| UC05 | Xem chi tiết tin đăng | Xem thông tin xe, không xem liên hệ seller |

### 3.1.2 Buyer (Người mua)

_Bao gồm tất cả chức năng của Guest_

| **UC ID** | **Use Case** | **Description** |
| --- | --- | --- |
| UC06 | Quản lý hồ sơ cá nhân | Cập nhật profile, avatar, địa chỉ |
| UC07 | Lọc nâng cao | Filter: size khung, groupset, loại phanh, chất liệu |
| UC08 | Chat/Nhắn tin với người bán | Real-time messaging |
| UC09 | Tạo đơn đặt mua / Đặt cọc | Booking/Deposit |
| UC10 | Quản lý danh sách yêu thích | Wishlist management |
| UC11 | Đánh giá người bán | Rating & Review sau giao dịch |
| UC12 | Báo cáo tin đăng vi phạm | Report Ad |

### 3.1.3 Seller (Người bán)

_Bao gồm tất cả chức năng của Guest_

| **UC ID** | **Use Case** | **Description** |
| --- | --- | --- |
| UC13 | Đăng tin bán xe | Post Ad với đầy đủ thông tin kỹ thuật |
| UC14 | Quản lý tin đăng | Sửa, Ẩn, Xóa, Đánh dấu đã bán |
| UC15 | Yêu cầu kiểm định xe | Gửi request tới Inspector |
| UC16 | Quản lý đơn hàng | Chấp nhận/Từ chối yêu cầu mua/cọc |
| UC17 | Phản hồi đánh giá | Reply Review từ buyer |

### 3.1.4 Inspector (Người kiểm định)

| **UC ID** | **Use Case** | **Description** |
| --- | --- | --- |
| UC18 | Tiếp nhận yêu cầu kiểm định | Nhận và xác nhận request |
| UC19 | Cập nhật Checklist kiểm tra | Khung, phuộc, truyền động, phanh, bánh |
| UC20 | Upload báo cáo kiểm định | Báo cáo + Hình ảnh thực tế |
| UC21 | Gắn nhãn "Verified" | Xác nhận xe đã kiểm định |
| UC22 | Tham gia giải quyết tranh chấp | Cung cấp bằng chứng kỹ thuật |

### 3.1.5 Admin (Quản trị viên)

| **UC ID** | **Use Case** | **Description** |
| --- | --- | --- |
| UC23 | Quản lý người dùng | Khóa/Mở khóa tài khoản |
| UC24 | Duyệt tin đăng | Approve/Reject Ads |
| UC25 | Quản lý danh mục kỹ thuật | Hãng xe, loại groupset, size chart |
| UC26 | Giải quyết khiếu nại/Tranh chấp | Dựa trên báo cáo Inspector |
| UC27 | Xem báo cáo thống kê | Doanh thu, user, traffic |

## 3.2 External Interface Requirements

### 3.2.1 User Interfaces

| **UI-ID** | **Screen/Component** | **Description** |
| --- | --- | --- |
| UI-001 | Homepage | Landing page với featured bikes, search |
| UI-002 | Bike Listing Page | Danh sách xe với filters, pagination |
| UI-003 | Bike Detail Page | Chi tiết xe, gallery, seller info, báo cáo kiểm định |
| UI-004 | Login/Register | Authentication forms |
| UI-005 | Seller Dashboard | Quản lý tin đăng, đơn hàng, tin nhắn |
| UI-006 | Create Listing | Form đăng tin với upload media |
| UI-007 | Chat Interface | Real-time messaging |
| UI-008 | Profile Page | Thông tin cá nhân, đánh giá, wishlist |
| UI-009 | Inspector Dashboard | Quản lý kiểm định |
| UI-010 | Admin Dashboard | Quản trị toàn hệ thống |
| UI-011 | Report Form | Form báo cáo vi phạm |
| UI-012 | Notification Center | Trung tâm thông báo |

### 3.2.2 API Interfaces

| **API-ID** | **Endpoint Group** | **Description** |
| --- | --- | --- |
| API-001 | /auth/\* | Authentication endpoints |
| API-002 | /products/\* | Bike CRUD operations |
| API-003 | /users/\* | User management |
| API-004 | /conversations/\* | Messaging system |
| API-005 | /messages/\* | Individual messages |
| API-006 | /orders/\* | Order/deposit management |
| API-007 | /transactions/\* | Transaction logs |
| API-008 | /inspections/\* | Inspection management |
| API-009 | /admin/\* | Admin operations |
| API-010 | /reviews/\* | Rating & reviews |
| API-011 | /reports/\* | Report system |
| API-012 | /notifications/\* | Notification system |
| API-013 | /brands/\* | Brand management |
| API-014 | /categories/\* | Category management |

## 3.3 Functional Requirements

### 3.3.1 Authentication & User Management

#### FR-AUTH-001: User Registration

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-AUTH-001 |
| **Description** | Hệ thống shall cho phép người dùng đăng ký tài khoản mới với email hoặc số điện thoại, chọn role Buyer hoặc Seller |
| **Priority** | Must |

**Inputs:**

- Email hoặc số điện thoại
- Mật khẩu (min 8 ký tự, có chữ hoa, số)
- Họ tên
- Role (Buyer/Seller)

**Processing:**

1\. Validate input format

2\. Kiểm tra email/phone chưa tồn tại

3\. Hash password với bcrypt

4\. Gửi OTP verification

5\. Tạo user record với status pending

**Outputs:**

- Success: Redirect đến verification page
- Error: Hiển thị lỗi cụ thể

#### FR-AUTH-002: User Login

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-AUTH-002 |
| **Description** | Hệ thống shall cho phép người dùng đăng nhập bằng email/SĐT và mật khẩu |
| **Priority** | Must |

#### FR-AUTH-003: Social Login

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-AUTH-003 |
| **Description** | Hệ thống shall hỗ trợ đăng nhập qua Google và Facebook |
| **Priority** | Should |

#### FR-AUTH-004: Password Reset

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-AUTH-004 |
| **Description** | Hệ thống shall cho phép reset mật khẩu qua email/SMS OTP |
| **Priority** | Must |

#### FR-AUTH-005: Profile Management

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-AUTH-005 |
| **Description** | User shall có thể cập nhật thông tin cá nhân: họ tên, avatar, địa chỉ mặc định, số điện thoại |
| **Priority** | Must |

### 3.3.2 Bike Listing Management (Seller)

#### FR-SELL-001: Create Bike Listing

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-SELL-001 |
| **Description** | Seller shall có thể đăng tin bán xe với đầy đủ thông tin kỹ thuật |
| **Priority** | Must |

**Inputs (Bắt buộc theo BR01):**

- Tiêu đề tin đăng
- Loại xe (Road, Mountain, City, Touring, BMX)
- Thương hiệu (Brand)
- **Kích thước khung** (S/M/L hoặc cm) ⭐
- **Kích thước bánh** (26, 27.5, 29, 700c) ⭐
- **Loại phanh** (Đĩa/V-brake) ⭐
- **Chất liệu khung** (Nhôm/Carbon/Thép) ⭐
- Bộ truyền động (Groupset - VD: Shimano 105)
- Tình trạng (Mới 90%, Đã qua sử dụng, Cần sửa chữa)
- Giá bán, Giá gốc (optional)
- Mô tả chi tiết
- Địa chỉ bán (Tỉnh/Thành, Quận/Huyện)

**Ảnh bắt buộc (theo BR02):**

- Ảnh toàn thân xe ⭐
- Ảnh bộ truyền động (groupset) ⭐
- Ảnh số khung (serial number) ⭐
- Ảnh bổ sung (tối đa 17 ảnh)
- Video (0-2, max 100MB)

**Processing:**

1\. Validate all required fields

2\. Validate image types

3\. Upload và compress media

4\. Tạo listing với status "Pending"

5\. Notify admin để duyệt

6\. Set expires_at = created_at + 30 ngày

#### FR-SELL-002: Edit Bike Listing

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-SELL-002 |
| **Description** | Seller shall có thể chỉnh sửa tin đăng đã tạo |
| **Priority** | Must |

**Constraints:**

- Sau khi sửa, tin cần được duyệt lại (status = Pending)
- Không thể sửa tin đang trong giao dịch

#### FR-SELL-003: Hide/Show Listing

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-SELL-003 |
| **Description** | Seller shall có thể ẩn tạm thời hoặc hiện lại tin đăng |
| **Priority** | Must |

#### FR-SELL-004: Delete Listing

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-SELL-004 |
| **Description** | Seller shall có thể xóa tin đăng (soft delete) |
| **Priority** | Must |

**Constraints:**

- Không thể xóa tin đang có đặt cọc active

#### FR-SELL-005: Mark as Sold

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-SELL-005 |
| **Description** | Seller shall có thể đánh dấu xe đã bán |
| **Priority** | Must |

#### FR-SELL-006: Request Inspection

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-SELL-006 |
| **Description** | Seller shall có thể gửi yêu cầu kiểm định xe tới Inspector |
| **Priority** | Should |

#### FR-SELL-007: Reply to Review

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-SELL-007 |
| **Description** | Seller shall có thể phản hồi đánh giá từ Buyer |
| **Priority** | Should |

### 3.3.3 Search & Browse (Buyer)

#### FR-BUY-001: Search Bikes

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-BUY-001 |
| **Description** | User shall có thể tìm kiếm xe theo từ khóa |
| **Priority** | Must |

#### FR-BUY-002: Basic Filter

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-BUY-002 |
| **Description** | User shall có thể lọc xe theo tiêu chí cơ bản |
| **Priority** | Must |

**Filter Options:**

- Loại xe (Road/MTB/City...)
- Thương hiệu
- Khoảng giá
- Địa điểm (Province/City)
- Tình trạng

#### FR-BUY-003: Advanced Filter (NEW)

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-BUY-003 |
| **Description** | User shall có thể lọc xe theo thông số kỹ thuật chi tiết |
| **Priority** | Must |

**Advanced Filter Options:**

- Kích thước khung (S/M/L hoặc range cm)
- Kích thước bánh (26, 27.5, 29, 700c)
- Loại phanh (Đĩa/V-brake)
- Chất liệu khung (Nhôm/Carbon/Thép)
- Groupset (Shimano, SRAM, Campagnolo)
- Có kiểm định (Verified/All)
- Có video (Yes/No)

#### FR-BUY-004: View Bike Detail

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-BUY-004 |
| **Description** | User shall có thể xem chi tiết xe bao gồm ảnh, mô tả, thông số, báo cáo kiểm định |
| **Priority** | Must |

**Display Information:**

- Image gallery với zoom
- Video player (nếu có)
- Chi tiết specs (tất cả thông số kỹ thuật)
- Seller profile và rating
- Báo cáo kiểm định công khai (nếu có) - theo BR07
- Nút liên hệ/chat (chỉ hiện khi đã đăng nhập)
- Nút đặt cọc

#### FR-BUY-005: Add to Wishlist

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-BUY-005 |
| **Description** | Buyer shall có thể lưu xe vào danh sách yêu thích |
| **Priority** | Should |

#### FR-BUY-006: Place Deposit

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-BUY-006 |
| **Description** | Buyer shall có thể đặt cọc giữ xe với cơ chế Escrow |
| **Priority** | Must |

**Business Rules (BR08):**

- Tiền cọc giữ trên hệ thống trung gian
- Nếu Seller giao đúng: tiền chuyển cho Seller (trừ phí)
- Nếu Seller hủy/xe sai mô tả: hoàn tiền Buyer

#### FR-BUY-007: Rate Seller

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-BUY-007 |
| **Description** | Buyer shall có thể đánh giá seller CHỈ sau khi đơn hàng "Hoàn tất" |
| **Priority** | Must |

**Constraint (BR10):**

- Đánh giá chỉ được phép khi order.status = "Completed"

#### FR-BUY-008: Report Listing (NEW)

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-BUY-008 |
| **Description** | User shall có thể báo cáo tin đăng vi phạm |
| **Priority** | Must |

**Inputs:**

- Loại vi phạm (Lừa đảo, Hàng giả, Sai mô tả, Spam)
- Mô tả chi tiết
- Bằng chứng (ảnh chụp - optional)

### 3.3.4 Messaging System

#### FR-MSG-001: Start Conversation

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-MSG-001 |
| **Description** | User shall có thể bắt đầu cuộc hội thoại với user khác về một sản phẩm cụ thể |
| **Priority** | Must |

#### FR-MSG-002: Real-time Messaging

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-MSG-002 |
| **Description** | Hệ thống shall hỗ trợ chat real-time qua WebSocket |
| **Priority** | Must |

**Features:**

- Gửi/nhận tin nhắn text
- Gửi ảnh
- Typing indicator
- Message status (sent/delivered/read)
- Push notification khi có tin mới

### 3.3.5 Inspection System (Inspector)

#### FR-INS-001: Receive Inspection Request

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-INS-001 |
| **Description** | Inspector shall có thể tiếp nhận yêu cầu kiểm định |
| **Priority** | Should |

#### FR-INS-002: Submit Inspection Report

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-INS-002 |
| **Description** | Inspector shall có thể điền checklist và upload báo cáo kiểm định |
| **Priority** | Should |

**Checklist Items:**

- Tình trạng khung (Frame) - Score 1-5
- Tình trạng phuộc (Fork) - Score 1-5
- Hệ thống phanh (Brakes) - Score 1-5
- Hệ thống truyền động (Drivetrain) - Score 1-5
- Bánh xe (Wheels) - Score 1-5
- % mòn xích líp
- Điểm tổng thể
- Passed/Failed
- Ghi chú chuyên gia
- Ảnh minh chứng
- File báo cáo PDF

#### FR-INS-003: Apply Verified Badge

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-INS-003 |
| **Description** | Hệ thống shall tự động gắn nhãn "Verified" khi Inspector approve |
| **Priority** | Should |

**Constraint (BR05):**

- CHỈ Inspector được phép gắn nhãn, Seller không thể tự gắn

**Constraint (BR06):**

- Nhãn có hiệu lực 7 ngày hoặc cho đến khi xe được bán
- Nếu xe thay đổi linh kiện, nhãn bị hủy

#### FR-INS-004: Dispute Support

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-INS-004 |
| **Description** | Inspector shall có thể cung cấp bằng chứng kỹ thuật để hỗ trợ giải quyết tranh chấp |
| **Priority** | Should |

### 3.3.6 Order & Transaction Management

#### FR-ORD-001: Create Order

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-ORD-001 |
| **Description** | Hệ thống shall tạo đơn hàng khi Buyer đặt cọc |
| **Priority** | Must |

**Order Data:**

- buyer_id, product_id
- total_amount, deposit_amount
- service_fee (theo BR09)
- payment_method
- status: Pending → Deposited → Completed → Cancelled

#### FR-ORD-002: Seller Accept/Reject Order

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-ORD-002 |
| **Description** | Seller shall có thể chấp nhận hoặc từ chối đơn đặt cọc |
| **Priority** | Must |

#### FR-ORD-003: Complete Transaction

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-ORD-003 |
| **Description** | Hệ thống shall ghi nhận giao dịch hoàn tất và xử lý tiền cọc |
| **Priority** | Must |

#### FR-ORD-004: Transaction Logging

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-ORD-004 |
| **Description** | Hệ thống shall ghi log chi tiết từng lần tiền vào/ra |
| **Priority** | Must |

### 3.3.7 Notification System (NEW)

#### FR-NOTIF-001: Send Notifications

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-NOTIF-001 |
| **Description** | Hệ thống shall gửi thông báo khi có sự kiện quan trọng |
| **Priority** | Must |

**Notification Types:**

- Tin nhắn mới
- Trạng thái đơn hàng thay đổi
- Tin đăng được duyệt/từ chối
- Xe đã được kiểm định xong
- Có đánh giá mới

#### FR-NOTIF-002: Notification Center

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-NOTIF-002 |
| **Description** | User shall có thể xem tất cả thông báo và đánh dấu đã đọc |
| **Priority** | Must |

### 3.3.8 Admin Management

#### FR-ADM-001: User Management

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-ADM-001 |
| **Description** | Admin shall có thể quản lý tất cả user accounts |
| **Priority** | Must |

**Functions:**

- View/Search/Filter users
- Ban/Unban user
- Reset password
- View user activity

#### FR-ADM-002: Listing Moderation

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-ADM-002 |
| **Description** | Admin shall có thể duyệt hoặc từ chối tin đăng (theo BR04) |
| **Priority** | Must |

#### FR-ADM-003: Report Management

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-ADM-003 |
| **Description** | Admin shall có thể xử lý báo cáo vi phạm |
| **Priority** | Must |

#### FR-ADM-004: Category & Brand Management

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-ADM-004 |
| **Description** | Admin shall có thể quản lý danh mục, thương hiệu, groupset, size chart |
| **Priority** | Must |

#### FR-ADM-005: Dispute Resolution

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-ADM-005 |
| **Description** | Admin shall có thể giải quyết tranh chấp dựa trên báo cáo Inspector (BR11) |
| **Priority** | Must |

#### FR-ADM-006: Analytics Dashboard

| **Attribute** | **Value** |
| --- | --- |
| **ID** | FR-ADM-006 |
| **Description** | Admin shall có thể xem thống kê và báo cáo hệ thống |
| **Priority** | Must |

**Reports:**

- Users: New registrations, active users, churn
- Listings: New, sold, pending, removed
- Revenue: Transaction fees, deposits, inspection fees
- Performance: Response times, error rates

## 3.4 Non-Functional Requirements

### 3.4.1 Performance Requirements

| **ID** | **Description** | **Target** |
| --- | --- | --- |
| NFR-PERF-001 | Page Load Time | < 3 giây (TTI) |
| NFR-PERF-002 | API Response Time | < 500ms (read), < 1000ms (write) |
| NFR-PERF-003 | Search Performance | < 1 giây cho 100K listings |
| NFR-PERF-004 | Concurrent Users | 5,000 users |

### 3.4.2 Security Requirements

| **ID** | **Description** | **Implementation** |
| --- | --- | --- |
| NFR-SEC-001 | Data Encryption | HTTPS (TLS 1.3), encrypted DB fields |
| NFR-SEC-002 | Authentication | JWT, refresh tokens, rate limiting |
| NFR-SEC-003 | Password Policy | Min 8 chars, uppercase, number, bcrypt |
| NFR-SEC-004 | Input Validation | Server-side validation, XSS/SQL prevention |
| NFR-SEC-005 | File Upload | Type validation, size limits, virus scan |

### 3.4.3 Reliability Requirements

| **ID** | **Description** | **Target** |
| --- | --- | --- |
| NFR-REL-001 | Availability | 99.5% uptime |
| NFR-REL-002 | Data Backup | Daily, RPO 24h, RTO 4h |
| NFR-REL-003 | Error Handling | Graceful degradation, logging |

### 3.4.4 Usability Requirements

| **ID** | **Description** | **Target** |
| --- | --- | --- |
| NFR-USA-001 | Mobile Responsiveness | Pass Google Mobile-Friendly |
| NFR-USA-002 | Accessibility | WCAG 2.1 Level AA |
| NFR-USA-003 | Navigation | 90% task completion without help |

# 4\. Business Rules

## 4.1 Listing Rules (Quy tắc Tin đăng)

| **BR ID** | **Rule** | **Description** |
| --- | --- | --- |
| **BR01** | Tiêu chuẩn thông tin kỹ thuật | Khi đăng tin, Seller PHẢI nhập: Size khung, Kích thước bánh, Loại phanh, Chất liệu khung |
| **BR02** | Hình ảnh thực tế | Tối thiểu 3 ảnh: Ảnh toàn thân, ảnh groupset, ảnh số khung (serial) |
| **BR03** | Thời hạn tin đăng | Tin có hiệu lực 30 ngày, sau đó phải gia hạn |
| **BR04** | Trạng thái tin mới | Tin mới = "Pending", cần Admin duyệt trước khi hiển thị |

## 4.2 Inspection Rules (Quy tắc Kiểm định)

| **BR ID** | **Rule** | **Description** |
| --- | --- | --- |
| **BR05** | Quy trình gắn nhãn | Nhãn "Verified" CHỈ được cấp bởi Inspector, Seller không thể tự gắn |
| **BR06** | Hiệu lực kiểm định | Báo cáo có giá trị 7 ngày hoặc đến khi bán. Thay đổi linh kiện = hủy nhãn |
| **BR07** | Minh bạch báo cáo | Báo cáo kiểm định PHẢI công khai trên trang chi tiết sản phẩm |

## 4.3 Transaction Rules (Quy tắc Giao dịch)

| **BR ID** | **Rule** | **Description** |
| --- | --- | --- |
| **BR08** | Cơ chế Escrow | Tiền cọc giữ trung gian. Giao đúng = chuyển Seller. Hủy/sai = hoàn Buyer |
| **BR09** | Phí dịch vụ | Thu phí x% khi giao dịch thành công hoặc phí kiểm định |

## 4.4 Trust & Safety Rules (Quy tắc Tin cậy)

| **BR ID** | **Rule** | **Description** |
| --- | --- | --- |
| **BR10** | Điều kiện đánh giá | Buyer CHỈ được đánh giá sau khi đơn hàng "Hoàn tất" |
| **BR11** | Xử lý tranh chấp | Kết quả từ Inspector là căn cứ ưu tiên để Admin quyết định hoàn tiền |

# Appendix A: Glossary

| **Term** | **Definition** |
| --- | --- |
| **Listing/Product** | Tin đăng bán xe trên hệ thống |
| **Deposit** | Khoản tiền đặt cọc để giữ xe |
| **Escrow** | Cơ chế giữ tiền trung gian giữa buyer và seller |
| **Inspection** | Quá trình kiểm định tình trạng xe bởi Inspector |
| **Verified Badge** | Nhãn hiển thị xe đã được kiểm định |
| **Wishlist** | Danh sách xe yêu thích của Buyer |
| **Rating** | Điểm đánh giá uy tín (1-5 sao) |
| **Moderation** | Quá trình Admin duyệt/từ chối nội dung |
| **Groupset** | Bộ truyền động xe đạp (líp, đùi đĩa, tay đề...) |
| **Frame Size** | Kích thước khung xe (S/M/L/XL hoặc cm) |

# Appendix B: Database Schema

## B.1 Core Tables

### users

users  
├── id (UUID, PK)  
├── email (VARCHAR, UNIQUE)  
├── phone (VARCHAR, UNIQUE)  
├── password_hash (VARCHAR)  
├── name (VARCHAR)  
├── avatar_url (VARCHAR)  
├── default_address (TEXT)  
├── role (ENUM: guest, buyer, seller, inspector, admin)  
├── phone_verified (BOOLEAN)  
├── email_verified (BOOLEAN)  
├── status (ENUM: active, banned)  
├── created_at (TIMESTAMP)  
└── updated_at (TIMESTAMP)  

### products

products  
├── id (UUID, PK)  
├── seller_id (UUID, FK → users)  
├── title (VARCHAR)  
├── description (TEXT)  
├── price (DECIMAL)  
├── original_price (DECIMAL, nullable)  
├── brand_id (UUID, FK → brands)  
├── category_id (UUID, FK → categories)  
├── frame_size (VARCHAR) -- S/M/L or cm  
├── wheel_size (VARCHAR) -- 26, 27.5, 29, 700c  
├── brake_type (ENUM: disc, v_brake, caliper)  
├── frame_material (ENUM: aluminum, carbon, steel, titanium)  
├── groupset (VARCHAR) -- e.g., Shimano 105  
├── condition (ENUM: like_new, used, need_repair)  
├── province (VARCHAR)  
├── district (VARCHAR)  
├── address (TEXT)  
├── status (ENUM: pending, active, hidden, sold)  
├── expires_at (TIMESTAMP) -- 30 days from created  
├── created_at (TIMESTAMP)  
└── updated_at (TIMESTAMP)  

### product_images

product_images  
├── id (UUID, PK)  
├── product_id (UUID, FK → products)  
├── url (VARCHAR)  
├── image_type (ENUM: main, groupset, serial, other)  
├── display_order (INTEGER)  
└── created_at (TIMESTAMP)  

### brands & categories

brands  
├── id (UUID, PK)  
├── name (VARCHAR)  
├── logo_url (VARCHAR)  
└── created_at (TIMESTAMP)  
<br/>categories  
├── id (UUID, PK)  
├── name (VARCHAR)  
├── slug (VARCHAR)  
├── parent_id (UUID, FK → categories, nullable)  
└── created_at (TIMESTAMP)  

## B.2 Inspection System

### inspections

inspections  
├── id (UUID, PK)  
├── product_id (UUID, FK → products)  
├── inspector_id (UUID, FK → users)  
├── frame_score (INTEGER 1-5)  
├── fork_score (INTEGER 1-5)  
├── brake_score (INTEGER 1-5)  
├── drivetrain_score (INTEGER 1-5)  
├── wheel_score (INTEGER 1-5)  
├── chain_wear_percentage (INTEGER)  
├── overall_score (DECIMAL)  
├── passed (BOOLEAN)  
├── notes (TEXT)  
├── report_file_url (VARCHAR)  
├── expires_at (TIMESTAMP) -- 7 days from created  
├── created_at (TIMESTAMP)  
└── updated_at (TIMESTAMP)  

## B.3 Messaging System

### conversations & messages

conversations  
├── id (UUID, PK)  
├── product_id (UUID, FK → products)  
├── buyer_id (UUID, FK → users)  
├── seller_id (UUID, FK → users)  
├── created_at (TIMESTAMP)  
└── updated_at (TIMESTAMP)  
<br/>messages  
├── id (UUID, PK)  
├── conversation_id (UUID, FK → conversations)  
├── sender_id (UUID, FK → users)  
├── content (TEXT)  
├── image_url (VARCHAR, nullable)  
├── is_read (BOOLEAN)  
├── created_at (TIMESTAMP)  

## B.4 Transaction System

### orders & transactions

orders  
├── id (UUID, PK)  
├── buyer_id (UUID, FK → users)  
├── product_id (UUID, FK → products)  
├── total_amount (DECIMAL)  
├── deposit_amount (DECIMAL)  
├── service_fee (DECIMAL)  
├── payment_method (ENUM: transfer, cash, online)  
├── status (ENUM: pending, deposited, completed, cancelled)  
├── created_at (TIMESTAMP)  
└── updated_at (TIMESTAMP)  
<br/>transactions  
├── id (UUID, PK)  
├── order_id (UUID, FK → orders)  
├── type (ENUM: deposit_in, deposit_out, refund, fee)  
├── amount (DECIMAL)  
├── balance_after (DECIMAL)  
├── note (TEXT)  
└── created_at (TIMESTAMP)  

## B.5 Trust & Safety

### reviews, reports, notifications

reviews  
├── id (UUID, PK)  
├── order_id (UUID, FK → orders) -- CHỈ review sau đơn hàng  
├── reviewer_id (UUID, FK → users)  
├── reviewee_id (UUID, FK → users)  
├── rating (INTEGER 1-5)  
├── comment (TEXT)  
├── seller_reply (TEXT, nullable)  
├── seller_replied_at (TIMESTAMP, nullable)  
└── created_at (TIMESTAMP)  
<br/>reports  
├── id (UUID, PK)  
├── reporter_id (UUID, FK → users)  
├── reported_type (ENUM: product, user)  
├── reported_id (UUID)  
├── reason (ENUM: fraud, fake, wrong_description, spam, other)  
├── description (TEXT)  
├── evidence_urls (TEXT\[\])  
├── status (ENUM: pending, reviewed, resolved)  
├── admin_note (TEXT, nullable)  
├── resolved_by (UUID, FK → users, nullable)  
├── created_at (TIMESTAMP)  
└── resolved_at (TIMESTAMP, nullable)  
<br/>notifications  
├── id (UUID, PK)  
├── user_id (UUID, FK → users)  
├── type (ENUM: order, chat, system, inspection)  
├── title (VARCHAR)  
├── content (TEXT)  
├── link_to (VARCHAR)  
├── is_read (BOOLEAN)  
└── created_at (TIMESTAMP)  
<br/>wishlists  
├── id (UUID, PK)  
├── user_id (UUID, FK → users)  
├── product_id (UUID, FK → products)  
└── created_at (TIMESTAMP)  

# Appendix C: Requirements Traceability Matrix

## C.1 Use Case to Functional Requirement Mapping

| **UC ID** | **Use Case** | **FR IDs** |
| --- | --- | --- |
| UC01-02 | Authentication | FR-AUTH-001 to 004 |
| UC03-05 | Browse/Search | FR-BUY-001, 002, 004 |
| UC06 | Profile | FR-AUTH-005 |
| UC07 | Advanced Filter | FR-BUY-003 |
| UC08 | Messaging | FR-MSG-001, 002 |
| UC09 | Deposit/Order | FR-BUY-006, FR-ORD-001 to 003 |
| UC10 | Wishlist | FR-BUY-005 |
| UC11 | Rating | FR-BUY-007 |
| UC12 | Report | FR-BUY-008 |
| UC13-17 | Seller Features | FR-SELL-001 to 007 |
| UC18-22 | Inspector Features | FR-INS-001 to 004 |
| UC23-27 | Admin Features | FR-ADM-001 to 006 |

## C.2 Business Rule Enforcement

| **BR ID** | **Enforced By** |
| --- | --- |
| BR01 | FR-SELL-001 (required fields) |
| BR02 | FR-SELL-001 (image validation) |
| BR03 | FR-SELL-001 (expires_at logic) |
| BR04 | FR-SELL-001, FR-ADM-002 |
| BR05-07 | FR-INS-001 to 003 |
| BR08-09 | FR-ORD-001 to 004 |
| BR10 | FR-BUY-007 |
| BR11 | FR-ADM-005, FR-INS-004 |

# Appendix D: Sign-Off

## D.1 Stakeholder Sign-Off

| **Stakeholder** | **Role** | **Signature** | **Date** |
| --- | --- | --- | --- |
|     | Product Owner | \_**\_**\___ |     |
|     | Tech Lead | \_**\_**\___ |     |
|     | QA Lead | \_**\_**\___ |     |
|     | Project Manager | \_**\_**\___ |     |

## D.2 Document Approval History

| **Version** | **Reviewed By** | **Status** | **Date** |
| --- | --- | --- | --- |
| 1.0 |     | Draft | 2026-01-21 |
| 2.0 |     | Updated Draft | 2026-01-21 |

_End of Software Requirements Specification v2.0_